# ====================================================================
# Sesami PDD v4.0 - Environment Configuration
# ====================================================================

# ============================================
# Database Configuration
# ============================================
POSTGRES_USER=sesami_user
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_DB=sesami_db
DATABASE_URL=postgresql://sesami_user:your_postgres_password_here@db:5432/sesami_db
DB_PORT=5432

# ============================================
# Redis Queue Configuration (로컬 개발용)
# ============================================
REDIS_HOST=queue
REDIS_PORT=6379
REDIS_EXTERNAL_PORT=6379
QUEUE_BROKER_URL=redis://queue:6379/0
CELERY_BROKER_URL=redis://queue:6379/0
CELERY_RESULT_BACKEND=redis://queue:6379/0

# ============================================
# Frontend Configuration
# ============================================
FRONTEND_PORT=3000
FRONTEND_URL=http://localhost:3000

# ============================================
# Backend Configuration
# ============================================
BACKEND_PORT=8000
BACKEND_HOST=0.0.0.0
BACKEND_URL=http://localhost:8000

# ============================================
# GitHub OAuth Configuration
# ============================================
GITHUB_CLIENT_ID=your_github_client_id_here
GITHUB_CLIENT_SECRET=your_github_client_secret_here
GITHUB_REDIRECT_URI=http://localhost:3000/auth/callback

# ============================================
# JWT Configuration
# ============================================
SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Token Encryption (Fernet Key)
ENCRYPTION_KEY=your-fernet-encryption-key-base64

# ============================================
# Neo4j Configuration (Graph Database)
# ============================================
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_neo4j_password_here
NEO4J_URI=bolt://neo4j:7687
NEO4J_HTTP_PORT=7474
NEO4J_BOLT_PORT=7687

# ============================================
# OpenSearch Configuration (Vector Store)
# ============================================
OPENSEARCH_HOST=opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_PERF_PORT=9600
OPENSEARCH_USER=admin
OPENSEARCH_PASSWORD=your_opensearch_password_here
OPENSEARCH_ENDPOINT=https://opensearch:9200
OPENSEARCH_INDEX_NAME=code_embeddings

# ============================================
# AWS Bedrock Configuration (LLM & Embeddings)
# ============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Bedrock 모델 ID
BEDROCK_EMBEDDING_MODEL_ID=amazon.titan-embed-text-v1
BEDROCK_LLM_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0

# Bedrock 사용 여부 (로컬: false, AWS: true)
USE_BEDROCK=false

# ============================================
# OpenAI Configuration (Bedrock Alternative)
# ============================================
OPENAI_API_KEY=
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_LLM_MODEL=gpt-4o

# ============================================
# Task Service Implementation
# ============================================
# LOCAL: Celery + Redis (로컬 개발)
# AWS_BATCH: Step Functions + AWS Batch (프로덕션)
TASK_SERVICE_IMPL=LOCAL

# ============================================
# AWS Infrastructure (프로덕션 전용)
# ============================================
# SQS Queue URL
SQS_QUEUE_URL=

# Step Functions State Machine ARN
STEP_FUNCTIONS_ARN=

# AWS Batch Job Queue & Definition
AWS_BATCH_JOB_QUEUE=
AWS_BATCH_JOB_DEFINITION=

# EFS Mount Path
EFS_MOUNT_PATH=/mnt/efs

# S3 Embedding Cache Bucket
S3_EMBEDDING_CACHE_BUCKET=

# ============================================
# L3-Tools Configuration
# ============================================
# Pylint
PYLINT_RCFILE=/app/.pylintrc

# SonarQube (로컬 개발 시 별도 컨테이너 필요)
SONAR_HOST_URL=http://sonarqube:9000

# Semgrep
SEMGREP_RULES=p/security-audit,p/secrets

# TruffleHog
TRUFFLEHOG_VERIFY=true

# ============================================
# L3-Agents Configuration
# ============================================
# LLM 파라미터
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.0

# Graph-RAG 설정
GRAPH_SNAPSHOT_CACHE_ENABLED=true

# Vector-RAG 설정
EMBEDDING_CACHE_ENABLED=true
CHUNK_SIZE=200
CHUNK_OVERLAP=50

# ============================================
# L2-Filter Configuration
# ============================================
# Pylint 점수 임계값 (이하 유의미)
L2_FILTER_MAX_QUALITY_SCORE=7.0

# Complexity 임계값 (이상 유의미)
L2_FILTER_MIN_COMPLEXITY=10

# 보안 취약점 존재 여부
L2_FILTER_SECURITY_ISSUES=true

# ============================================
# Worker Configuration
# ============================================
# Worker 타입 (각 컨테이너별로 설정)
WORKER_TYPE=

# Celery 동시성
CELERY_CONCURRENCY_L2=4
CELERY_CONCURRENCY_L3_TOOLS=10
CELERY_CONCURRENCY_L3_BUILDERS=2
CELERY_CONCURRENCY_L3_AGENTS=2

# ============================================
# Monitoring & Logging (프로덕션 전용)
# ============================================
# CloudWatch Logs Group
CLOUDWATCH_LOG_GROUP=/aws/batch/sesami-worker

# X-Ray Tracing
XRAY_ENABLED=false

# ============================================
# Development Settings
# ============================================
# Debug Mode
DEBUG=true

# Log Level
LOG_LEVEL=INFO
